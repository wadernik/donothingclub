<!doctype html>
<html>

<head>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

   <!-- Bootstrap CSS -->
   <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
      crossorigin="anonymous">
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

   <title>Вариант 10</title>
</head>

<body>
   <div class="container">
      <h2>Вариант 10</h2>
      <div class="panel panel-primary mt-5">
         <div class="panel-heading">
            <h4>Задание 1</h4>
         </div>

         <!-- Блок, где осуществляется ввод данных для первого задания.
         У каждого <input> есть свой идентификтор, по которому
         можно обратиться и получить его значение.
         В блоке не используется тег <button>, потому что для корректной работы <button>
         устанавливается параметр <type="submit"> внутри <form> (формы), который используется 
         для отправки данных с формы на сервер. Для реализации простой кнопки взят <a> с <href="#">.
         Такой параметр устанавливается, чтобы тег <a> стал кликабельным.-->
         <div class="panel-body">
            <h4>Исходные данные</h4>
            <form>
               <div class="form-row">
                  <div class="form-group col-md-2">
                     <label>x</label>
                     <input type="text" class="form-control" id="inputX1">
                  </div>
                  <div class="form-group col-md-2">
                     <label>a</label>
                     <input type="text" class="form-control" id="inputA1">
                  </div>
                  <div class="form-group col-md-2">
                     <label>b</label>
                     <input type="text" class="form-control" id="inputB1">
                  </div>
               </div>
               <a href="#" id="calcTask1" class="btn btn-primary">Посчитать</a>
            </form>
         </div>
         <!-- Ответ добавляется внутрь под тег div -->
         <div class="panel-footer">
            <h4>Ответ</h4>
            <div id="resultTask1">
            </div>
         </div>
      </div>

      <!-- По аналогии со 2 заданием -->
      <div class="panel panel-primary mt-5">
         <div class="panel-heading">
            <h4>Задание 2</h4>
         </div>
         <div class="panel-body">
            <h4>Исходные данные</h4>
            <form>
               <div class="form-row">
                  <div class="form-group col-md-2">
                     <label>x</label>
                     <input type="text" class="form-control" id="inputX2">
                  </div>
                  <div class="form-group col-md-2">
                     <label>a</label>
                     <input type="text" class="form-control" id="inputA2">
                  </div>
               </div>
               <a href="#" id="calcTask2" class="btn btn-primary">Посчитать</a>
            </form>
         </div>
         <div class="panel-footer">
            <h4>Ответ</h4>
            <div id="resultTask2">
            </div>
         </div>
      </div>

      <!-- Здесь 5 блоков.
      Первый - селектор. Через выпадающее меню выбирается, 
      что будет отрисовано под ним.
      Таким образом реализовано переключение между задачами в 3 задании.
      Следующие 3 блока работают по аналогии с выше приведенными.
      Последний блок отрисовывает таблицу - массив, с которым
      производится вся работа в данном задании.
      Массив отрисовывается динамически, т.е. любое изменение в нем будет отражено. -->
      <div class="panel panel-primary mt-5">
         <div class="panel-heading">
            <h4>Задание 3</h4>
         </div>
         <div class="panel-body">
            <div class="form-group">
               <label for="sel1">Выбери действие</label>
               <select class="form-control" id="sel1">
                  <option value="1">Вывести массив</option>
                  <option value="2">Рассчитать "+" и "*"</option>
                  <option value="3">Отсортировать по возврастанию</option>
                  <option value="4">Добавить в массив элемент</option>
                  <option value="5">Удалить из массива элемент</option>
               </select>
            </div>
            <fieldset disabled id="selection2" style="display: none">
               <div class="form-row">
                  <div class="form-group col-md-2">
                     <label>Сумма</label>
                     <input type="text" id="summResId" class="form-control">
                  </div>
                  <div class="form-group col-md-2">
                     <label>Произведение</label>
                     <input type="text" id="multiplyResId" class="form-control">
                  </div>
               </div>
            </fieldset>
            <form id="selection4" style="display: none">
               <fieldset>
                  <div class="form-row">
                     <div class="form-group col-md-2">
                        <label>Первое число</label>
                        <input type="text" id="inputAddFirst" class="form-control">
                     </div>
                     <div class="form-group col-md-2">
                        <label>Второе число</label>
                        <input type="text" id="inputAddSecond" class="form-control">
                     </div>
                     <div class="form-group col-md-2">
                        <label>Метод</label>
                        <select class="form-control" id="sel2">
                           <option value="1">splice()</option>
                           <option value="2">unshift()</option>
                           <option value="3">push()</option>
                        </select>
                     </div>
                  </div>
               </fieldset>
               <a href="#" id="calcTask4" class="btn btn-primary">Добавить</a>
            </form>
            <form id="selection5" style="display: none">
               <fieldset>
                  <div class="form-group">
                     <label>Метод</label>
                     <select class="form-control" id="sel3">
                        <option value="1">splice()</option>
                        <option value="2">shift()</option>
                        <option value="3">pop()</option>
                     </select>
                  </div>
               </fieldset>
               <a href="#" id="calcTask5" class="btn btn-primary">Удалить</a>
            </form>
            <table class="table table-condensed mt-3" id="talbeId">
               <thead>
                  <tr>
                     <th>Номер</th>
                     <th>Значение</th>
                  </tr>
               </thead>
               <tbody id="tBody">
               </tbody>
            </table>
         </div>
      </div>
   </div>


   <script type="text/javascript">

      // Задание 1
      // 
      // Для запуска функции по клику используем систему событий и jquery.
      // Для этого на тег <a> "вешается" событие click(), внутри которой написана наша функция.
      // При дальнейшем клике на тег она будет вызвана.
      // Тег <a> сделан кликабельным. "#" внутри <href> указывает
      // идентификатор элемента html, к которому будет прокручено окно (скролл установится
      // около элемента с указанным id), но т.к. после # идентификатор не указан,
      // скролл будет прокручен к началу страницы. Чтобы это предотвратить, используется
      // метод класса Event preventDefault(), который отменяет возможное для отмены действие.
      // Далее с помощью идентификаторов получаем значения с полей ввода, очищаем поле
      // с ответом, если там уже что-то было (предыдущее решение). Производим расчет и 
      // и добавляем результат с помощью append(). 
      $('#calcTask1').click(function(e) {
         e.preventDefault();
         let xValue = $('#inputX1').val();
         let aValue = $('#inputA1').val();
         let bValue = $('#inputB1').val();
         let resultField = $('#resultTask1');
         let result;
         resultField.empty();
         
         if (xValue <= 3.4) {
            result = (aValue - xValue) / bValue;
            resultField.append("Первая ветвь вычисления / x <= 3.4<br>");
         } else if (xValue > 3.4) {
            result = (xValue - aValue) / bValue;
            resultField.append("Вторая ветвь вычисления / x > 3.4<br>");
         } else {
            resultField.append("Введено неккоректное число x");
         }

         result = Math.round(result * 1000) / 1000;
         resultField.append(result);
      });

      // Задание 2
      //
      // По аналогии все то же самое тут
      $('#calcTask2').click(function(e) {
         e.preventDefault();
         let xValue = $('#inputX2').val();
         let aValue = $('#inputA2').val();
         let resultField = $('#resultTask2');
         let result;
         resultField.empty();
         
         switch(aValue) {
            case '1':
               result = Math.sin(xValue);
               resultField.append("Первая ветвь вычисления / a = 1<br>");
               break;
            case '2':
               result = Math.pow(xValue, -3);
               resultField.append("Вторая ветвь вычисления / a = 2<br>");
               break;
            case '3':
               result = Math.sqrt(xValue);
               resultField.append("Третья ветвь вычисления / a = 3<br>");
               break;
         }
         result = Math.round(result * 1000) / 1000;
         resultField.append(result);
      });

      // Задание 3

      // Задание массива и его вывод
      var myArray = ['2019', '15', '-3.5', '13.37', '-207'];
      printArray(myArray);

      // Функция вывода массива.
      // С помощью jquery в таблицу внутрь <tbody> с помощью 
      // id этого тега добавляются новые элементы. 
      // Каждая строка таблицы - пара из номера элемента и его значения
      function printArray(arrayVar) {
         var tableBody;
         if (arrayVar.length == 0) {
            $('#tBody').empty();
         } else {
            arrayVar.forEach((element, index) => {
               tableBody += 
               `
                  <tr>
                     <td>${index}</td>
                     <td>${element}</td>
                  </tr>
               `;
            });
            $('#tBody').html(tableBody);
         }
      }

      // Просчет суммы и произведения всех элементов массива.
      // Осущестляется за один обход цикла. Значения так же
      // с помощью jquery добавляются в html в нужные поля
      function calcSummAndMultiply(arrayVar) {
         let summ = 0;
         let multiply = 1;
         if (arrayVar.length != 0) {
            arrayVar.forEach(element => {
               summ += parseFloat(element);
               multiply *= element;
            });
         }

         $('#summResId').val(summ);
         $('#multiplyResId').val(multiply);
      }

      // Добавляет в массив два значения по выбранному методу.
      // Выбранный метод выбирается из выпадающего меню.
      // Splice() кладет значения в середину массива, 
      // unshift() - в начало,
      // push() - в конец.
      function addNewElement(value1, value2, method) {
         switch (method) {
            case '1':
               myArray.splice((myArray.length / 2), 0, value1, value2);
               break;
            case '2':
               myArray.unshift(value1, value2);
               break;
            case '3':
               myArray.push(value1, value2);
               break;
         }
      }

      
      // По аналогии с предыдущей функцией осуществляется удаление
      function removeElement(method) {
         switch (method) {
            case '1':
               myArray.splice((myArray.length / 2), 1);
               break;
            case '2':
               myArray.shift();
               break;
            case '3':
               myArray.pop();
               break;
         }
      }

      // По аналогии повесили событие click() для добавления нового
      // значения в массив, которое по клику собирает значения с полей
      // <input> и вызывает функцию добавления новых элементов. 
      $('#calcTask4').click(function(e) {
         e.preventDefault();
         let val1 = $('#inputAddFirst').val();
         let val2 = $('#inputAddSecond').val();
         let method = $('#sel2').val();
         addNewElement(val1, val2, method);
         printArray(myArray);
      });

      // Точно так же с удалением
      $('#calcTask5').click(function(e) {
         e.preventDefault();
         let method = $('#sel3').val();
         removeElement(method);
         printArray(myArray);
      });


      // Основное меню-селектор. Переключает то, что нужно отрисовать,
      // остальное скрывает. Все это осуществляется с помощью функций 
      // jquery hide() и show(), которые переключают параметр стиля
      // "display". Все элементы, как и везде, берутся по своему идентификатору.
      $('#sel1').on('change', function() {
         switch(this.value) {
            case '1':
               $('#talbeId').show();
               $('#selection2').hide();
               $('#selection4').hide();
               $('#selection5').hide();
               printArray(myArray);
               break;
            case '2':
               $('#talbeId').show();
               $('#selection2').show();
               $('#selection4').hide();
               $('#selection5').hide();
               calcSummAndMultiply(myArray);
               break;
            case '3':
               $('#selection2').hide();
               $('#selection4').hide();
               $('#selection5').hide();
               let sortedArray = Array.from(myArray);
               sortedArray.sort(function(firstElement, secondElement) {
                  return firstElement - secondElement;
               });
               printArray(sortedArray);
               break;
            case '4':
               $('#selection2').hide();
               $('#selection4').show();
               $('#selection5').hide();
               break;
            case '5':
               $('#selection2').hide();
               $('#selection4').hide();
               $('#selection5').show();
               break;
         }
      });
      
   </script>
</body>
</html>